<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <title>Upcoming Events Accordion</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .no-scroll {
            overflow: hidden;
            height: 100vh;
        }
        .accordion {
            width: 100%;
            margin: auto;
        }
        .accordion-item {
            border: 1px solid #ccc;
            margin-bottom: 10px;
            border-radius: 5px;
            overflow: hidden;
        }
        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f5f5f5;
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
        }
        .accordion-header-top {
            font-size: 14px;
            display: block;
            color: #5b6778;
        }
        .accordion-content {
            display: none;
            padding: 15px;
            background: #f9f9f9;
            border-top: 1px solid #ccc;
        }
        .month-accordion {
            border: 0px solid transparent; 
            border-bottom: 1px solid #ccc !important;
        }
        .description-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        .book-slot {
            background: black;
            color: white;
            padding: 14px 18px;
            text-decoration: none;
            border-radius: 0px;
            font-size: 12px;
            text-transform: uppercase;
        }
        .book-slot:hover {
            color: #e0e0e0;
        }
        
         /* Modal Styling */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        .modal-content {
            background-color: white;
            margin: 5% auto;
            /*padding: 20px;*/
            width: 70%;
            border-radius: 5px;
            position: relative;
            overflow: auto;
            max-height: 95%;
        }
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 30px;
            cursor: pointer;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .submit-btn {
            background: black;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
            width: 100%;
            font-size: 14px;
        }
        
        .xs-fsize {
            font-size: 18px;
            color: #d4d4d4 !important;
            font-weight: normal !important;
            margin-bottom: 0;
        }
        .xl-fsize {
            color: white !important;
            font-size: 30px;
            margin-bottom: 0;
        }
        .md-fsize {
            font-size: 25px;
            color: white !important;
            margin-bottom: 10px;
        }
        .sm-fsize {
            font-size: 12px !important;
            color: #d4d4d4 !important;
            font-weight: normal !important;
            margin-bottom: 3px;
            text-transform: uppercase;
        }
        .sm-fsize-value {
            font-size: 16px !important;
            color: white !important;
            font-weight: bolder !important;
            text-transform: none !important;
        }
        .flex {
            display: inline-flex;
            gap: 30px;
        }
        .ad-details {
            margin-left: -20px;
            gap: 60px !important;
            margin-top: 10px;
            padding: 30px 20px;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.6); /* Semi-transparent black */
            border-radius: 0px 20px 20px 0px; /* Optional: Add rounded corners for a softer look */
        }
        
        /* Blurred overlay */
        .ad-details::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0px 20px 20px 0px;
            background: rgba(0, 0, 0, 0.4); /* Semi-transparent black */
            backdrop-filter: blur(10px); /* Apply blur effect */
            -webkit-backdrop-filter: blur(10px); /* Safari support */
            z-index: 0;
        }
        
        /* Ensure content stays clear */
        .ad-details > * {
            position: relative;
            z-index: 1;
            color: white; /* Ensure text is visible on dark background */
        }
        .d-block {
            display: block;
        }
        .capitalize {
            text-transform: capitalize !important;
        }
        .formsubmit {
            background-color: black;
            border-radius: 0px;
            text-transform: uppercase;
        }
        .formsubmit:hover {
            background-color: black;
        }
        .select2-container {
            margin-top: -20px;
            margin-bottom: 10px;
            width: 100% !important;
        }
        .select2-dropdown--below {
            top: 30px;
        }
        .select2-selection {
            border: 1px solid #69727d !important;
            border-radius: 0px !important;
        }
        .select2-hidden-accessible {
            position: relative !important;
        }
        .block-disp {
            display: block;
        }
        @media (max-width: 1000px) {
            .modal-container {
                flex-direction: column; /* Stack items vertically on small screens */
            }
        }
    </style>
</head>
<body>

    <div class="accordion" id="accordion-container">
        <p>Loading events...</p>
    </div>
    
     <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
           
            <div id="bookingForm" class="modal-container" style="display: flex; width: 100%; gap: 10px;">
                <div style="flex: 1; background-image: url('http://highlimitsvip.com/wp-content/uploads/2024/02/10001-1.jpg'); background-repeat: no-repeat; background-size: cover; background-position: center; !important; color: white !important; padding: 20px">
                    <div >
                        <div>
                            <p class="sm-fsize">Upcoming Flight Information:</p>
                           <h1 class="xl-fsize capitalize" id="prepop-flight-name">---</h1>
                           <div class="flex">
                                <div class="flex-item">
                                    <p class="sm-fsize">Airport Code: <span class="block-disp sm-fsize-value" id="prepop-air-code">---</span></p>
                                </div>
                                <div class="flex-item">
                                    <p class="sm-fsize">Night(s): <span class="block-disp sm-fsize-value" id="prepop-nights">---</span></p>
                                </div>
                                 <div class="flex-item">
                                    <p class="sm-fsize">Location: <span class="block-disp sm-fsize-value capitalize" id="prepop-location">---</span></p>
                                </div>
                           </div>
                            <div class="ad-details flex">
                                <div class="a-details">
                                    <h2 class="md-fsize">Arrival Details</h2>
                                    <div>
                                        <p class="sm-fsize">Date: <span class="d-block sm-fsize-value" id="prepop-ad-date">---</span></p>
                                        <p class="sm-fsize">Departure Time: <span class="d-block sm-fsize-value" id="prepop-ad-d">---</span></p>
                                        <p class="sm-fsize">Arrival Time: <span class="d-block sm-fsize-value" id="prepop-ad-a">---</span></p>
                                    </div>
                                </div>
                                <div class="d-details">
                                     <h2 class="md-fsize">Departure Details</h2>
                                    <div>
                                        <p class="sm-fsize">Date: <span class="d-block sm-fsize-value" id="prepop-dd-date">---</span></p>
                                        <p class="sm-fsize">Departure Time: <span class="d-block sm-fsize-value" id="prepop-dd-d">---</span></p>
                                        <p class="sm-fsize">Arrival Time: <span class="d-block sm-fsize-value" id="prepop-dd-a">---</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
               <div id='crmWebToEntityForm' class='zcwf_lblLeft crmWebToEntityForm' style='background-color: white;color: black; flex: 1.2; padding: 20px;'>
            	<meta name='viewport' content='width=device-width, initial-scale=1.0'>
            	<META HTTP-EQUIV ='content-type' CONTENT='text/html;charset=UTF-8'>
            	<script src='https://www.google.com/recaptcha/api.js' async defer></script>
            	<h2>Book Your Slot</h2>
            	<form id='webform3272574000104695642' action='https://crm.zoho.com/crm/WebToLeadForm' name=WebToLeads3272574000104695642 method='POST' onSubmit='javascript:document.charset="UTF-8"; return checkMandatory3272574000104695642()' accept-charset='UTF-8' style="max-height: 650px; overflow: auto; padding: 10px;">
            	   <input type='text' style='display:none;' name='xnQsjsdp' value='b3b03bf2eaa3a6146fff4888ba89d9730e8d3aaaaa8dbe85530a1654bdd78be8'> 
            	   <input type='hidden' name='zc_gad' id='zc_gad' value=''>
            	   <input type='text' style='display:none;' name='xmIwtLD' value='4811b93608b41a2c06fb669cdb10da537fe677389ba39bf105226b029b407e98bc34150f9bc641be064a143d9fff8e9d'> 
            	   <input type='text'  style='display:none;' name='actionType' value='TGVhZHM='>
            	   <input type='text' style='display:none;' name='returnURL' value='https&#x3a;&#x2f;&#x2f;highlimitsvip.com&#x2f;upcoming-events-trips&#x2f;' > 
            	   <!-- Do not remove this code. -->
            	    <style>
            	        .zcwf_lblLeft .zcwf_col_fld input[type=text], input[type=number], input[type=password], select, .zcwf_lblLeft .zcwf_col_fld textarea {
                		  border: 1px solid #69727d !important;
                		  resize: vertical;
                		  border-radius: 2px !important;
                		  margin-top: 5px;
                		  margin-bottom: 10px;
            		    }
            	    </style>
                	<input type='hidden' id='LEADCF19' name='LEADCF19' for='property'>
                	<input type="hidden" id='LEADCF26' name='LEADCF26' for='arrival-day'>
                	<input type='hidden' id='LEADCF233' name='LEADCF233' for='arrival-date'>
                	<input type='hidden' id='LEADCF23' name='LEADCF23' for='arrival-date-dd'>
                	<input type='hidden' id='LEADCF24' name='LEADCF24' for='arrival-date-ad'>
                    <input type="hidden" id='LEADCF27' name='LEADCF27' for='departure-day'>
                    <input type='hidden' id='LEADCF234' name='LEADCF234' for='departure-date'>
                    <input type='hidden' id='LEADCF25' name='LEADCF25' for='departure-date-dd'>
                    <input type='hidden' id='LEADCF22' name='LEADCF22' for='departure-date-ad'>
                    <input type='hidden' id='LEADCF28' name='LEADCF28' for='wp-id'>
                   <div style="display: flex; width: 100%; gap: 10px;">
                        <div class='zcwf_row' style="flex: 1;">
                            <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'>
                                <label for='First_Name'>First Name<span style='color:red;'>*</span></label>
                            </div>
                            <div class='zcwf_col_fld'>
                                <input type='text' id='First_Name' aria-required='true' aria-label='First Name' name='First Name' aria-valuemax='40' maxlength='40' style="width: 100%;">
                                <div class='zcwf_col_help'></div>
                            </div>
                        </div>
                        <div class='zcwf_row' style="flex: 1;">
                            <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'>
                                <label for='Last_Name'>Last Name<span style='color:red;'>*</span></label>
                            </div>
                            <div class='zcwf_col_fld'>
                                <input type='text' id='Last_Name' aria-required='true' aria-label='Last Name' name='Last Name' aria-valuemax='80' maxlength='80' style="width: 100%;">
                                <div class='zcwf_col_help'></div>
                            </div>
                        </div>
                    </div>
            	   <div class='zcwf_row'>
            		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Email'>Email</label></div>
            		  <div class='zcwf_col_fld'>
            			 <input type='text' ftype='email' autocomplete='false' id='Email' aria-required='false' aria-label='Email' name='Email' aria-valuemax='100' crmlabel='' maxlength='100'>
            			 <div class='zcwf_col_help'></div>
            		  </div>
            	   </div>
            	   <div style="display: flex; width: 100%; gap: 10px;">
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Phone'>Phone</label></div>
                		  <div class='zcwf_col_fld'>
                			 <input type='text' id='Phone' aria-required='false' aria-label='Phone' name='Phone' aria-valuemax='30' maxlength='30'>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Mobile'>Mobile<span style='color:red;'>*</span></label></div>
                		  <div class='zcwf_col_fld'>
                			 <input type='text' id='Mobile' aria-required='true' aria-label='Mobile' name='Mobile' aria-valuemax='30' maxlength='30'>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
            	   </div>
            	   <div style="display: flex; width: 100%; gap: 10px;">
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='LEADCF1'>Preferred Method of Contact</label></div>
                		  <div class='zcwf_col_fld'>
                			 <select class='zcwf_col_fld_slt' role='combobox' aria-expanded='false' aria-haspopup='listbox' id='LEADCF1' onChange='addAriaSelected3272574000104695642()' aria-required='false' aria-label='LEADCF1' name='LEADCF1'  >
                				<option value='-None-'>-None-</option>
                				<option value='Phone'>Phone</option>
                				<option value='Email'>Email</option>
                				<option value='Both&#x20;are&#x20;Fine'>Both are Fine</option>
                			 </select>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='LEADCF81'>Birthday<span style='color:red;'>*</span></label></div>
                		  <div class='zcwf_col_fld' style="position: relative;">
                			 <input type='text' id='LEADCF81' aria-required='true' aria-label='LEADCF81' name='LEADCF81' aria-valuemax='20' maxlength='20' ftype='date' placeholder='MM/DD/YY' aria-placeholder='MM/DD/YY' tplid='3272574000104695642LEADCF81' onfocus='formCalender.stEv(event);formCalender.createCalendar(this);' autocomplete='off'>
                			 <div id='template3272574000104695642LEADCF81'  onclick='formCalender.stEv(event);'  class='tempCalDiv'></div>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
            	   </div>
            	   <div style="display: flex; width: 100%; gap: 10px;">
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Street'>Street</label></div>
                		  <div class='zcwf_col_fld'>
                			 <input type='text' id='Street' aria-required='false' aria-label='Street' name='Street' aria-valuemax='250' maxlength='250'>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='City'>City</label></div>
                		  <div class='zcwf_col_fld'>
                			 <input type='text' id='City' aria-required='false' aria-label='City' name='City' aria-valuemax='100' maxlength='100'>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
            	   </div>
            	   <div style="display: flex; width: 100%; gap: 10px;">
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='State'>State</label></div>
                		  <div class='zcwf_col_fld'>
                			 <input type='text' id='State' aria-required='false' aria-label='State' name='State' aria-valuemax='100' maxlength='100'>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Zip_Code'>Zip Code</label></div>
                		  <div class='zcwf_col_fld'>
                			 <input type='text' id='Zip_Code' aria-required='false' aria-label='Zip Code' name='Zip Code' aria-valuemax='30' maxlength='30'>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Country'>Country</label></div>
                		  <div class='zcwf_col_fld'>
                			 <input type='text' id='Country' aria-required='false' aria-label='Country' name='Country' aria-valuemax='100' maxlength='100'>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
            	   </div>
            	   <div class='zcwf_row'>
            		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='LEADCF18'>Players Card</label></div>
            		  <div class='zcwf_col_fld'>
            			 <input type='text' id='LEADCF18' aria-required='false' aria-label='LEADCF18' name='LEADCF18' aria-valuemax='255' maxlength='255'>
            			 <div class='zcwf_col_help'></div>
            		  </div>
            	   </div>
            	   <div style="display: flex; width: 100%; gap: 10px;">
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='LEADCF20'>Room Request</label></div>
                		  <div class='zcwf_col_fld'>
                			 <select class='zcwf_col_fld_slt' role='combobox' aria-expanded='false' aria-haspopup='listbox' id='LEADCF20' onChange='addAriaSelected3272574000104695642()' aria-required='false' aria-label='LEADCF20' name='LEADCF20'  >
                				<option value='-None-'>-None-</option>
                				<option value='King&#x20;Non&#x20;Smoking'>King Non Smoking</option>
                				<option value='King&#x20;Smoking'>King Smoking</option>
                				<option value='Double&#x20;Non&#x20;Smoking'>Double Non Smoking</option>
                				<option value='Double&#x20;Smoking'>Double Smoking</option>
                				<option value='Suite&#x20;Request'>Suite Request</option>
                			 </select>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
                	   <div class='zcwf_row' style="flex: 1;">
                		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='LEADCF53'>Number of Rooms</label></div>
                		  <div class='zcwf_col_fld'>
                			 <input type='number' id='LEADCF53' aria-required='false' aria-label='LEADCF53' name='LEADCF53' aria-valuemax='9' maxlength='9'>
                			 <div class='zcwf_col_help'></div>
                		  </div>
                	   </div>
            	   </div>
            	   <div class='zcwf_row'>
                        <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'>
                            <label for='LEADCF16'>Special Request</label>
                        </div>
                        <div class='zcwf_col_fld'>
                            <select class='zcwf_col_fld_slt' id='LEADCF16' name='LEADCF16' multiple>
                                <option value='Close to Elevator'>Close to Elevator</option>
                                <option value='Early Check In'>Early Check In</option>
                                <option value='High Floor'>High Floor</option>
                                <option value='Late Check In'>Late Check In</option>
                                <option value='Late Check Out'>Late Check Out</option>
                                <option value='Low Floor'>Low Floor</option>
                                <option value='Pet Friendly'>Pet Friendly</option>
                                <option value='Room with Tub'>Room with Tub</option>
                                <option value='Shower Needed'>Shower Needed</option>
                            </select>
                            <div class='zcwf_col_help'></div>
                        </div>
                    </div>
            	   <div class='zcwf_row'>
            		  <div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='LEADCF6'>Message</label></div>
            		  <div class='zcwf_col_fld'>
            			 <textarea style='font-family: Arial, sans-serif;' aria-multiline='true' id='LEADCF6' aria-required='false' aria-label='LEADCF6' name='LEADCF6'></textarea>
            			 <div class='zcwf_col_help'></div>
            		  </div>
            	   </div>
            	   <div class='zcwf_row'>
            		  <div class='zcwf_col_lab'></div>
            		  <div class='zcwf_col_fld'>
            			 <div class='g-recaptcha' data-sitekey='6LeJPPAqAAAAAE3jpHK3a2ph2QkYMbyqxk-Uervg' data-theme='light' data-callback='rccallback3272574000104695642' captcha-verified='false' id='recap3272574000104695642'></div>
            			 <div  id='recapErr3272574000104695642' style='font-size:12px;color:red;visibility:hidden;'>Captcha validation failed. If you are not a robot then please try again.</div>
            		  </div>
            	   </div>
            	   <div class='zcwf_row'>
            		  <div class='zcwf_col_lab'></div>
            		  <div class='zcwf_col_fld'><input type='submit' id='formsubmit' role='button' class='formsubmit zcwf_button' value='Submit' aria-label='Submit' title='Submit'></div>
            	   </div>
            	   <script type='text/javascript'>var formCalender={userPattern:'YYYY-MM-DD',currDateObj:void 0,currMonth:void 0,currYear:void 0,currDate:void 0,currMonthEnd:[31,28,31,30,31,30,31,31,30,31,30,31],monthName:void 0,days:void 0,displayPanel:void 0,isHideToday:void 0,calDefColor:'#515CCB',weekdays:{1:'Sunday',2:'Monday',3:'Tuesday',4:'Wednesday',5:'Thursday',6:'Friday',7:'Saturday'},months:{1:'January',2:'February',3:'March',4:'April',5:'May',6:'June',7:'July',8:'August',9:'September',10:'October',11:'November',12:'December'},init:function(){this.monthName=[{html:'January',value:0},{html:'February',value:1},{html:'March',value:2},{html:'April',value:3},{html:'May',value:4},{html:'June',value:5},{html:'July',value:6},{html:'August',value:7},{html:'September',value:8},{html:'October',value:9},{html:'November',value:10},{html:'December',value:11}],this.days=['ssunday','smonday','stuesday','swednesday','sthursday','sfriday','ssaturday'],this.dayNamesShort=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],this.daysBasedOnPrefernce=['ssunday','smonday','stuesday','swednesday','sthursday','sfriday','ssaturday'];var e=this.daysBasedOnPrefernce[0];this.daysBasedOnPrefernce.shift(1),this.daysBasedOnPrefernce.push(e);var t=this.dayNamesShort[0];this.dayNamesShort.shift(1),this.dayNamesShort.push(t),this.currDateObj=new Date,this.currMonth=this.currDateObj.getMonth(),this.currYear=this.currDateObj.getFullYear(),this.currYear<1e3&&(this.currYear+=1900),this.currDate=this.currDateObj.getDate()},getTitle:function(){return this.monthName[this.currMonth].html+' '+this.currYear},createCalendar:function(e){for(var t=document.getElementsByClassName('tempCalDiv'),a=t.length,r=0;r<a;r++){var n=t[r].style;'block'===n.display&&(n.display='none')}this.calendarNode=e,this.userPattern=this.calendarNode.placeholder;var s=this.calendarNode.value,i=!1;if(s){var l=dateFormatConvert.validate(s,this.userPattern);l&&(this.currDate=l.getDate(),this.currMonth=l.getMonth(),this.currYear=l.getFullYear(),this.currYear<1e3&&(this.currYear=Number(this.currYear)+1900))}else i=!0,formCalender.init();this.monthName||formCalender.init(),this.createDatePicker(this.currDate,this.currMonth,this.currYear,i,!1)},createDatePicker:function(e,t,a,r,n){1===this.currMonth&&(this.currMonthEnd[1]=this.currYear%400==0||this.currYear%4==0&&this.currYear%100!=0?29:28);var s=new Date(a,t,1),i=6,l=this.daysBasedOnPrefernce.indexOf(this.days[s.getDay()])+1;i=31===this.currMonthEnd[t]&&l>=6||30===this.currMonthEnd[t]&&7===l?7:28===this.currMonthEnd[t]&&1===l?5:6;var d=this.getTitle(e,a,t),o=this.dayNamesShort,h='<div id=\'calenDiv\'><i id=\'calArrow\' style=\'display:none;\' class=\'dIB SocialArrow\'></i><div><div>';h+='<div class=\'aligncenter\'><span class=\'calNav dIB vaM yearNavLft\' onclick=\'formCalender.updateDatePicker(event,undefined, -1)\'><i class=\'arrow left mRMinus2\'></i><i class=\'arrow left\'></i></span><span class=\'calNav dLft dIB vaM\' onClick=\'formCalender.updateDatePicker(event,-1)\' id=\'pm\'><i class=\'arrow left\'></i></span><span class=\'sCalMon\'>'+d+'</span><span class=\'calNav dRgt vaM\' onClick =\'formCalender.updateDatePicker(event,1)\' id=\'nm\'><i class=\'arrow right\'></i></span><span class=\'calNav dIB vaM yearNavRgt\' onclick=\'formCalender.updateDatePicker(event,undefined, 1)\'><i class=\'arrow right\'></i><i class=\'arrow right mLMinus2\'></i></span></div>',h+='<table  class=\'calDay\'  id =\'weekDays\' style=\'color:#8b9ab9; font-size:8px; margin-left:0\'><tr> <th>'+o[0]+'</th> <th>'+o[1]+'</th><th>'+o[2]+'</th><th>'+o[3]+'</th> <th>'+o[4]+'</th> <th>'+o[5]+'</th> <th>'+o[6]+'</th></tr></table>',h+='</div>',h+='<table id=\'calHeader\' class=\'calDay\' style=\'margin-left:0; margin-top:-5px;\' width=\'100%\' cellspacing=\'0\' cellpadding=\'0\' border=\'0\' >';var c='',u=new Date,y=a||u.getFullYear(),v=e||u.getDate(),g=void 0===t?u.getMonth():t,m=u.getMonth(),p=u.getFullYear();u.getDate();m===t&&a===p&&(c=' style=\'display:none\'');for(var f,D,M,b=s.getDay();1!==b;)s.setDate(s.getDate()-1),b=s.getDay();for(var x=1;x<=i;x++){h+='<tr>';for(var Y=1;Y<8;Y++){f=s.getMonth(),D=s.getFullYear(),M=s.getDate(),D+'-'+(parseInt(f)+1)+'-'+M;var F='cdate lt-gray';if(M===v&&D===y&&f===g&&(F='cdate lt-gray'),f===g&&(F='cdate'),(r&&M===v&&m===g&&p===y||!n&&M===v&&f===g&&D===y)&&(F='sel'),n){var k=dateFormatConvert.validate(this.calendarNode.value,formCalender.userPattern);k&&M===k.getDate()&&f===k.getMonth()&&D===k.getFullYear()&&(F='sel')}h+='<td class=\''+F+'\' onClick=\'formCalender.displaySelectedDate(\"'+M+' '+f+' '+D+'\")\'>'+M+'</td>',s.setDate(s.getDate()+1)}h+='</tr>'}h+='</table>',h+='<div>',this.isHideToday||(h+='<div id=\'calBtns\' class=\'pT15 pB15 fL\'><a'+c+' class=\'cP fL\' href=\'javascript:;\' id=\'todayBtn\' onclick=\'formCalender.displaySelectedDate(\"today\")\'>Today</a>'),h+='</div>',h+='</div>',h+='</div></div>';var C=document.getElementById('template'+this.calendarNode.getAttribute('tplid'));C.innerHTML=h,C.style.display='block'},displaySelectedDate:function(e,t){if(!t)t=this.calendarNode;if('today'===e){var a=new Date;e=a.getDate()+' '+a.getMonth()+' '+a.getFullYear()}e=e.split(' ');var r=dateFormatConvert.convertFormat(new Date(e[2],e[1],e[0]),this.userPattern);t.value=r,t.focus(),t.placeholder=this.userPattern,formCalender.closeDatePicker(),t.addEventListener('keyup',function(e){formCalender.calendarNode=this;var t=this.value,a=dateFormatConvert.validate(t,formCalender.userPattern);if(a){var r={};r.date=a.getDate(),r.month=a.getMonth(),r.year=a.getFullYear(),formCalender.updateDatePicker(e,void 0,void 0,r)}}),t.blur()},closeDatePicker:function(){document.getElementById('template'+this.calendarNode.getAttribute('tplid')).style.display='none'},updateDatePicker:function(e,t,a,r){var n=document.getElementById('template'+this.calendarNode.getAttribute('tplid'));r&&(this.currDate=r.date,this.currMonth=r.month,this.currYear=r.year),void 0!==t?1===t?11===this.currMonth?(this.currMonth=0,this.currYear++):this.currMonth++:0===this.currMonth?(this.currMonth=11,this.currYear--):this.currMonth--:void 0!==a&&(this.currYear=parseInt(this.currYear)+a),this.createDatePicker(this.currDate,this.currMonth,this.currYear,!1,!0),n.style.display='block'},stEv:function(e){e||(e=window.event),e&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}};window.onclick=function(){for(var e=document.getElementsByClassName('tempCalDiv'),t=e.length,a=0;a<t;a++){var r=e[a];if(document.activeElement===document.querySelector('input[tplid=\''+r.id.replace('template','')+'\']'))return;var n=e[a].style;'block'===n.display&&(n.display='none')}};var dateFormatConvert={shortMon:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],longMon:['January','February','March','April','May','June','July','August','September','October','November','December'],dayArr:[31,28,31,30,31,30,31,31,30,31,30,31],wod:1,lm:'userdate',_dateObj:void 0,lLimit:80,formats:[{val:'YYYY',type:'year',regex:/\d{4}/,len:4},{val:'GGGG',type:'year',regex:/\d{4}/,len:4,isWEG:!0},{val:'gggg',type:'year',regex:/\d{4}/,len:4,isWEG:!0},{val:'YY',type:'year',regex:/\d{2}/,len:2},{val:'GG',type:'year',regex:/\d{2}/,len:2,isWEG:!0},{val:'gg',type:'year',regex:/\d{2}/,len:2,isWEG:!0},{val:'MMMM',type:'month',regex:/[A-z]{3,}/,long:!0,str:!0,array:['January','February','March','April','May','June','July','August','September','October','November','December']},{val:'MMM',str:!0,type:'month',regex:/[A-z]{3,}/,array:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']},{val:'Mo',suff:!0,type:'month',regex:/\d{1,2}(?=st|nd|rd|th)/,max:12},{val:'MM',type:'month',regex:/\d{2}/,len:2,max:12,alt:!0},{val:'M',type:'month',regex:/\d{1,2}/,max:12},{val:'DDDD',type:'date',regex:/\d{3}/,len:3,year:!0},{val:'DDDo',type:'date',suff:!0,regex:/\d{1,3}(?=st|nd|rd|th)/,len:3,year:!0,ignore:/\d{3}(?=st|nd|rd|th)/},{val:'DDD',type:'date',regex:/\d{1,3}/,year:!0,ignore:/\d{3}/},{val:'Do',type:'date',suff:!0,regex:/\d{1,2}(?=st|nd|rd|th)/},{val:'DD',type:'date',regex:/\d{2}/,len:2,alt:!0},{val:'D',type:'date',regex:/\d{1,2}/},{val:'dddd',type:'longdate',regex:/[A-z]{3,}/,long:!0,str:!0,array:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday']},{val:'ddd',type:'longdate',regex:/[A-z]{3}/,str:!0,array:['Sun','Mon','Tue','Wed','Thu','Fri','Sat']},{val:'dd',type:'longdate',regex:/[A-z]{2}/,str:!0,array:['Su','Mo','Tu','We','Th','Fr','Sa']},{val:'do',type:'longdate',regex:/\d{1}(?=st|nd|rd|th)/,suff:!0},{val:'d',type:'longdate',regex:/\d{1}/}],parseFormat:function(e,t){for(var a,r=this.formats,n=[],s=r.length,i=0;i<s;i++){var l=r[i];if(!e.length)break;if(e.indexOf(l.val)>-1){if(t&&l.alt){a=!0;continue}a&&(l.val=r[i-1].val,l=r[i-1]),a=!1,n.push({format:l,index:e.indexOf(l.val)}),e=e.replace(l.val,Math.pow(10,l.val.length-1)),i--}else;}return n.sort(function(e,t){return e.index-t.index})},convertFormat:function(e,t){this._dateObj=e;var a=this._dateObj,r=this.parseFormat(t,!0),n={},s={date:a.getDate(),month:a.getMonth(),year:a.getFullYear(),day:a.getDay()};t=this.fmReplace(t.replace(/{{|}}/g,''),r);for(var i=r.length,l=0;l<i;l++){var d=r[l].format;switch(d.type){case'date':t=t.replace(d.val+this.lm,this.crctLength(d.year?this.totdate(s.month,this.isLeap(s.year),s.date):s.date,d.len,d.suff));break;case'month':t=d.str?t.replace(d.val+this.lm,d.array[s.month]):t.replace(d.val+this.lm,this.crctLength(s.month+1,d.len,d.suff));break;case'year':t=t.replace(d.val+this.lm,2===d.len?this.crctLength(s.year%100,2):4===(s.year+'').length?s.year:this.crctLength(s.year,4)),n.year=n.year||[],n.year.push(d);break;case'day':case'week':n.flag=!0,n[d.type]=n[d.type]||[],n[d.type].push(d);break;case'longdate':t=d.str?t.replace(d.val+this.lm,d.array[s.day]):t.replace(d.val+this.lm,this.crctLength(s.day,null,d.suff))}}return t.replace(/{{|}}/g,'')},fmReplace:function(e,t){for(var a=0,r=t.length,n=0;n<r;n++)e=e.slice(0,t[n].index+a)+t[n].format.val+this.lm+e.slice(t[n].index+a+t[n].format.val.length),a+=8;return e},totdate:function(e,t,a){for(var r=0,n=0;n<e;n++)r+=this.dayArr[n],t&&1===n&&(r+=1);return r+(a||0)},crctLength:function(e,t,a){var r='';if(a&&(r=this.nthconv(e)),t){e=e.toString();for(var n=1;n<t;n++)e.length<=n&&(e='0'+e)}return e+r},nthconv:function(e){if(e>3&&e<21)return'th';switch(e%10){case 1:return'st';case 2:return'nd';case 3:return'rd';default:return'th'}},isLeap:function(e){return 2===(e+='').length&&(e=this.getCorrectYear(parseInt(e))),(e=parseInt(e))%4==0&&e%100!=0||e%400==0},getCorrectYear:function(e){var t=e+'';if(e=parseInt(e),2===t.length){var a=(new Date).getFullYear(),r=parseInt(a/100),n=a%100,s=(n-this.lLimit+100)%100;e=n>s?e<s?r+1+''+this.crctLength(e,2):r+''+this.crctLength(e,2):e<s?r+''+this.crctLength(e,2):r-1+''+this.crctLength(e,2)}return e},valFormat:function(e,t){for(var a={},r=new Date((new Date).getFullYear(),0),n=this.parseFormat(t,!0),s=e,i=t=t.replace(/{{|}}/g,''),l=n.length,d=0;d<l;d++){var o,h=n[d].format;switch(h.type){case'date':case'year':case'week':case'day':h.regex.test(e)?(o='year'===h.type?e.match(h.regex)[h.match||0]:parseInt(e.match(h.regex)[h.match||0]),a[h.type]=o,e=this.replaceVal(e,h.regex,h.suff),s=this.replaceVal(s,h.regex,h.suff,h.val),h.year&&(a.date=getDay(a.date).day)):a.year&&a.week?(a[h.type]=this.wod,t=t.replace(h.val,''),i=i.replace(h.val,'')):a[h.type]='Invalid',/date/i.test(h.type)&&0===a[h.type]&&(a[h.type]='Invalid');break;case'month':h.regex.test(e)?(o=this.getMonth(e.match(h.regex)[0],h.suff,h.str,h.long),a.month=o.val,e=this.replaceVal(e,o.mon||h.regex,h.suff),s=this.replaceVal(s,o.mon||h.regex,h.suff,h.val)):a.month='Invalid',a.month<0&&(a.month='Invalid');break;case'longdate':h.regex.test(e)&&(o=h.str?this.findVal(h.array,e.match(h.regex)[0]):parseInt(e.match(h.regex)[0]),a.longdate=this.isDef(o.index)?o.index:o,e=this.replaceVal(e,o.mon||o,h.suff),s=this.replaceVal(s,o.mon||o,h.suff,h.val))}t=t.replace(h.valForm||h.val,'')}if(this.isDef(a.longdate)&&a.day&&a.day!==a.longdate?r.setFullYear('Invalid'):this.isDef(a.year)&&r.setFullYear(this.getCorrectYear(a.year)),this.isDef(a.month)&&r.setMonth(a.month),this.isDef(a.date)&&r.setDate(a.date<=this.dayArr[r.getMonth()]+(1===r.getMonth()&&this.isLeap(r.getFullYear())?1:0)?a.date:'Invalid'),this._isCorrectFormat=e.length===t.length&&i===s&&this.validate(r))return r},validate:function(e,t){var a=e.constructor;if(a===Date)return this._dateObj=e,'Invalid Date'!==e.toString();if(a===String&&t){var r=this.valFormat(e,t);return r&&this._isCorrectFormat&&(this._format=t),r}},replaceVal:function(e,t,a,r){return e=e.replace(t,r||''),a&&(e=e.replace(/st|nd|rd|th/,'')),e},getMonth:function(e,t,a,r){var n;if(a){var s=this.findVal(r?this.longMon:this.shortMon,e);n=s.mon,e=s.index,(!n||e>11)&&(e='Invalid')}else(e=parseInt(e)-1)>11&&(e='Invalid');return{val:e,mon:n}},findVal:function(e,t){var a,r,n=e.length;for(r=0;r<n;r++)if(new RegExp(e[r]).test(t)){a=e[r];break}return{mon:a,index:r}},isDef:function(e){return void 0!==e}};</script>
            	   <style>
            		  #calenDiv{padding:10px;display:table; width: 195px;font-family: helvetica,sans-serif !important;}
            		  .calNav{width:20px; height:15px; display:inline-block;position:relative; top:4px; cursor:pointer}
            		  #calenDiv .calNav {width:15px;}
            		  #calenDiv .yearNavLft {right:10px;}
            		  #calenDiv .yearNavRgt {left:10px;}
            		  #calenDiv .dLft {right:5px; }
            		  #calenDiv .dRgt {left:5px;}
            		  .dLft{right:10px;opacity:0.8; }
            		  .dRgt{left:10px;opacity:0.8;}
            		  .yearNavLft{right:15px; }
            		  .yearNavRgt{left:15px;opacity:0.6;}
            		  #calenDiv table.calDay {border-spacing:6px; margin-top:0}
            		  #calenDiv table.calDay td{ padding:3px 4px; font-size:11px}
            		  #calenDiv table.calDay th {padding: 0 3px;font-size: 11px;padding-right: 0;padding-left: 1px;color: #888;width: 22px;cursor: default;border-radius: 3px;text-align: center;font-weight: normal;}
            		  #calenDiv #weekDays{margin-top: 10px;margin-bottom: 5px;border-top: 1px solid #c0c6cc;border-bottom: 1px solid #c0c6cc;border-spacing: 5px;margin-left: 0;color: #8b9ab9;}
            		  #calenDiv .sCalMon {cursor: default;display: inline-block;color: #888;width: 110px;font-size: 12px;}
            		  table.calDay td:hover{background-color:#e8e8e8;}
            		  table.calDay{ color:#222; margin-left:-10px; border-spacing:12px;}
            		  table.calDay td, table.calDay th{ font-size: var(--crm-extra-medium-font-size); cursor:default;border-radius:3px; text-align:center;  padding:3px 5px; font-family: helvetica,sans-serif !important; }
            		  table.calDay td.sel,table.calDay td.sel:hover{color:#fff; background:#b3b3b3; border-radius:3px;}
            		  table.calDay td.noNum,table.calDay td.lt-gray{color:#c1c1c1;}
            		  .aligncenter {text-align: center;}
            		  #calBtns a, .lyteCalBtns .lyteCalCurrentDate a {color: var(--linkColor);font-size: 14px;text-decoration: none;}
            		  #calenDiv #calBtns {width: 183px;margin-left: 10px;border-top: 0;font-size: 11px;padding: 3px 0 12px!important;}
            		  .arrow {border: solid #666;border-width: 0 1px 1px 0;display: inline-block;height: 6px;width: 6px;}
            		  #calenDiv .right {transform: rotate(-45deg);-webkit-transform: rotate(-45deg);}
            		  #calenDiv .left {transform: rotate(135deg); -webkit-transform: rotate(135deg);}
            		  .mLMinus2{margin-left: -2px;}
            		  .mRMinus2{margin-right: -2px;}
            		  .vaM{vertical-align: middle;}
            		  .tempCalDiv{display: none;margin: 0;position: absolute;z-index: 1000;background-color: #fff; border: 1px solid #c0c6cc; -webkit-box-shadow: 0 2px 10px rgba(0,0,0,0.3);box-shadow: 0 2px 10px rgba(0,0,0,0.3); border-top: 0;top: 20px;}
            	   </style>
            	   <script>
        	           $(document).ready(function() {
                            $('#LEADCF16').select2({
                                placeholder: "Select Special Requests",
                                allowClear: true
                            });
                        });
            		  function addAriaSelected3272574000104695642()
            		  {
            			  var optionElem = event.target;
            			  var previousSelectedOption=optionElem.querySelector('[aria-selected=true]');
            			  if(previousSelectedOption){
            				  previousSelectedOption.removeAttribute('aria-selected');
            			  }
            			  optionElem.querySelectorAll('option')[optionElem.selectedIndex].ariaSelected='true';
            		  }
            		  
            		  /* Do not remove this code. */
            		  function rccallback3272574000104695642()
            		  {
            		  if(document.getElementById('recap3272574000104695642')!=undefined){
            			  document.getElementById('recap3272574000104695642').setAttribute('captcha-verified',true);
            		  }
            		  if(document.getElementById('recapErr3272574000104695642')!=undefined && document.getElementById('recapErr3272574000104695642').style.visibility == 'visible' ){
            			  document.getElementById('recapErr3272574000104695642').style.visibility='hidden';
            		  }
            		  }
            		  function reCaptchaAlert3272574000104695642()
            		  {
            		  var recap = document.getElementById('recap3272574000104695642');
            		  if( recap !=undefined && recap.getAttribute('captcha-verified') == 'false')
            		  {
            			  document.getElementById('recapErr3272574000104695642').style.visibility='visible';
            			  return false;
            		  }
            		  return true;
            		  }
            		  function validateEmail3272574000104695642()
            		  {
            		  var form = document.forms['WebToLeads3272574000104695642'];
            		  var emailFld = form.querySelectorAll('[ftype=email]');
            		  var i;
            		  for (i = 0; i < emailFld.length; i++)
            		  {
            			  var emailVal = emailFld[i].value;
            			  if((emailVal.replace(/^\s+|\s+$/g, '')).length!=0 )
            			  {
            				  var atpos=emailVal.indexOf('@');
            				  var dotpos=emailVal.lastIndexOf('.');
            				  if (atpos<1 || dotpos<atpos+2 || dotpos+2>=emailVal.length)
            				  {
            					  alert('Please enter a valid email address. ');
            					  emailFld[i].focus();
            					  return false;
            				  }
            			  }
            		  }
            		  return true;
            		  }
            		  function validateDateFormat3272574000104695642()
            		  {
            		  var form = document.forms['WebToLeads3272574000104695642'];
            		  var dateFlds = form.querySelectorAll('[ftype=date]');
            		  var i;
            		  for (i = 0; i < dateFlds.length; i++)
            		  {
            			  var dateFld = dateFlds[i];
            			  var usrPtrn = dateFld.placeholder;
            			  var dateVal = dateFld.value;
            			  if(dateVal.trim() != ''){
            				  var vald = dateFormatConvert.validate(dateVal,usrPtrn);
            				  if(!vald){
            					  alert('Please enter a valid date ');
            					  dateFld.focus();
            					  return false;
            				  }
            				   // Convert input date to a JavaScript Date object
                                var inputDate = new Date(dateVal);
                                var today = new Date();
                                today.setHours(0, 0, 0, 0); // Normalize time for accurate comparison
                    
                                if (inputDate >= today) {
                                    alert('Please enter a valid date ');
                                    dateFld.focus();
                                    return false;
                                }
            			  }
            		  }
            		  return true;
            		  }
            		  
            		  function checkMandatory3272574000104695642() {
            		  var mndFileds = new Array('First Name','Last Name','Mobile','LEADCF81');
            		  var fldLangVal = new Array('First\x20Name','Last\x20Name','Mobile','Birthday');
            		  for(i=0;i<mndFileds.length;i++) {
            			var fieldObj=document.forms['WebToLeads3272574000104695642'][mndFileds[i]];
            			if(fieldObj) {
            			  if (((fieldObj.value).replace(/^\s+|\s+$/g, '')).length==0) {
            			   if(fieldObj.type =='file')
            				  { 
            				   alert('Please select a file to upload.'); 
            				   fieldObj.focus(); 
            				   return false;
            				  } 
            			  alert(fldLangVal[i] +' cannot be empty.'); 
            							  fieldObj.focus();
            							  return false;
            			  }  else if(fieldObj.nodeName=='SELECT') {
            							 if(fieldObj.options[fieldObj.selectedIndex].value=='-None-') {
            				  alert(fldLangVal[i] +' cannot be none.'); 
            				  fieldObj.focus();
            				  return false;
            				 }
            			  } else if(fieldObj.type =='checkbox'){
            					 if(fieldObj.checked == false){
            				  alert('Please accept  '+fldLangVal[i]);
            				  fieldObj.focus();
            				  return false;
            				 } 
            			   } 
            			   try {
            				   if(fieldObj.name == 'Last Name') {
            				  name = fieldObj.value;
            						}
            			  } catch (e) {}
            			  }
            		  }
            		  if(!validateEmail3272574000104695642()){return false;}
            		  
            		  if(!reCaptchaAlert3272574000104695642()){return false;}
            		  
            		  if(!validateDateFormat3272574000104695642()){return false;}
            		  
            		  var urlparams = new URLSearchParams( window.location.search);
            		  if(urlparams.has('service') && (urlparams.get('service')==='smarturl')){
            		  var webform = document.getElementById('webform3272574000104695642');
            		   var service =  urlparams.get('service'); 
            		  var smarturlfield = document.createElement('input');
            		  smarturlfield.setAttribute('type','hidden');
            		  smarturlfield.setAttribute('value',service);
            		  smarturlfield.setAttribute('name','service');
            		  webform.appendChild(smarturlfield); 
            		  }
            		 
            		  document.querySelector('.crmWebToEntityForm .formsubmit').setAttribute('disabled', true);
            		  
            		    setTimeout(function() {
                            alert("Request submitted successfully!");
                            document.forms['WebToLeads3272574000104695642'].submit();
                        }, 200);
            		  }
            		  
            		  function tooltipShow3272574000104695642(el){
            		  var tooltip = el.nextElementSibling;
            		  var tooltipDisplay = tooltip.style.display;
            		  if(tooltipDisplay == 'none'){
            		  var allTooltip = document.getElementsByClassName('zcwf_tooltip_over');
            		  for(i=0; i<allTooltip.length; i++){
            			  allTooltip[i].style.display='none';
            		  }
            		  tooltip.style.display = 'block';
            		  }else{
            		  tooltip.style.display='none';
            		  }
            		  }
            	   </script>
            	   <!-- Do not remove this --- Analytics Tracking code starts --><script id='wf_anal' src='https://crm.zohopublic.com/crm/WebFormAnalyticsServeServlet?rid=3b2f65c66ecac4becfd1bc0232331a0aac158fb5e79f061de641e15c43e1c98d27dd97e32c505fd66e380a5dd7f50555gideea9395344059b1b5e80dfe4844b9fd8bf179bab0fa65075e395fbd64baa7b9cgidd67eb9e83820bdc6ba5c5f2c8e2767ab47a04e125385c62eeb1fc199a6280aa8gidbf493f3ec858f4769189c6e4912f74a22f537461b861dee8208f7e2afde41927&tw=ba9b732de4632b7fb7aebd7a963f5268680382383216748651ea135650554ca0'></script><!-- Do not remove this --- Analytics Tracking code ends. -->
            	</form>
             </div>
            </div>
        </div>
    </div>

    <script>
        
        let allEvents = [];
        function fetchAllEvents(page, headers) {
            fetch(`https://highlimitsvip.com/wp-json/tribe/events/v1/events?page=${page}&per_page=50`, {
                method: "GET",
                headers: headers
            })
            .then(response => response.json())
            .then(data => {
                if (data.events && data.events.length > 0) {
                    allEvents = allEvents.concat(data.events); // Append new events
                    fetchAllEvents(page + 1); // Fetch next page
                } else {
                    // Process only when all events have been fetched
                    // Final processing
                    const container = document.getElementById("accordion-container");
                    container.innerHTML = ""; // Clear loading message
        
                    const now = new Date();
        
                    // Filter only upcoming & published events
                    const filteredEvents = allEvents.filter(event => 
                        new Date(event.start_date).setHours(0, 0, 0, 0) > now.setHours(0, 0, 0, 0) && event.status === "publish"
                    );
        
                    if (filteredEvents.length === 0) {
                        container.innerHTML = "<p>No upcoming events available.</p>";
                        return;
                    }
        
                    // Group events by month
                    const eventsByMonth = {};
                    console.log(filteredEvents.length)
                    filteredEvents.forEach(event => {
                        const eventDate = new Date(event.start_date);
                        const monthYear = eventDate.toLocaleString("en-US", { month: "long", year: "numeric" });
        
                        if (!eventsByMonth[monthYear]) {
                            eventsByMonth[monthYear] = [];
                        }
                        eventsByMonth[monthYear].push(event);
                    });
        
                    let isFirstMonth = true; // Track first month
        
                    // Render grouped events
                    for (const [monthYear, events] of Object.entries(eventsByMonth)) {
                        let monthAccordion = document.createElement("div");
                        monthAccordion.classList.add("accordion-item", "month-accordion");
        
                        // Parent accordion for the month
                        monthAccordion.innerHTML = `
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <span>${monthYear}</span>
                            </div>
                            <div class="accordion-content" style="display: ${isFirstMonth ? "block" : "none"};"></div>
                        `;
        
                        const monthContent = monthAccordion.querySelector(".accordion-content");
        
                        // Render events inside the month
                        events.forEach(event => {
                            let eventHTML = `
                                <div class="accordion-item event-accordion">
                                    <div class="accordion-header" onclick="toggleAccordion(this)">
                                        <div>
                                            <span class="accordion-header-top">${new Date(event.start_date).toLocaleString('en-US', { 
                                                weekday: 'short', 
                                                month: 'short', 
                                                day: '2-digit', 
                                                year: 'numeric' 
                                            }).replace(',', '')} ${new Date(event.start_date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true }).toUpperCase()}</span>
                                            <span>${event.title} </span>
                                        </div>
                                        <a href="#" class="book-slot">Book Slot</a>
                                    </div>
                                    <div class="accordion-content" style="display: none;">
                                        ${formatDescription(event.description, event.id, event.title)}
                                    </div>
                                </div>
                            `;
                            monthContent.innerHTML += eventHTML;
                        });
        
                        container.appendChild(monthAccordion);
                        isFirstMonth = false; // Only first month should be open
                    }
                }
            })
            .catch(error => console.error("Error fetching events:", error));
        }

        if (typeof adminAjaxUrl !== "undefined") {
            fetch(adminAjaxUrl + "?action=get_secure_data")
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const headers = new Headers();
                    headers.set("Authorization", "Basic " + btoa(`${data.data.username}:${data.data.password}`));
                    fetchAllEvents(1, headers);
                } else {
                    console.error("Failed to fetch data");
                }
            })
            .catch(error => console.error("Error:", error));
        } else {
            console.error("adminAjaxUrl is not defined.");
        }
        
        function toggleAccordion(element) {
            let content = element.nextElementSibling;
            content.style.display = content.style.display === "block" ? "none" : "block";
        }
        
         function openModal(description) {
            const property = description.querySelector(".property").textContent, 
                wpId = description.querySelector(".event-id").value, 
                eventTitle = description.querySelector(".event-title").value, 
                arrivalDay = description.querySelector(".arrival-day").textContent, 
                arrivalDate = description.querySelector(".arrival-date").textContent,
                departureTimeAD = description.querySelector(".departure-time-ad").textContent, 
                arrivalTimeAD = description.querySelector(".arrival-time-ad").textContent,
                departureDay = description.querySelector(".departure-day").textContent,
                departurelDate = description.querySelector(".departure-date").textContent,
                departureTimeDD = description.querySelector(".departure-time-dd").textContent,
                arrivalTimeDD = description.querySelector(".arrival-time-dd").textContent,
                nights = description.querySelector(".nights").textContent,
                airportCode = description.querySelector(".airport").textContent,
                city = description.querySelector(".city").textContent,
                state = description.querySelector(".state").textContent;
            document.getElementById("LEADCF19").value = property;
            document.getElementById("LEADCF28").value = wpId;
            document.getElementById("LEADCF26").value = arrivalDay;
            document.getElementById("LEADCF233").value = new Date(arrivalDate.replace(/-/g, "/")).toLocaleDateString("en-US");
            document.getElementById("LEADCF23").value = departureTimeAD;
            document.getElementById("LEADCF24").value = arrivalTimeAD;
            document.getElementById("LEADCF27").value = departureDay;
            document.getElementById("LEADCF234").value = new Date(departurelDate.replace(/-/g, "/")).toLocaleDateString("en-US");
            document.getElementById("LEADCF25").value = departureTimeDD;
            document.getElementById("LEADCF22").value = arrivalTimeDD;
            
            document.getElementById("prepop-flight-name").innerHTML = eventTitle;
            document.getElementById("prepop-air-code").innerHTML = airportCode;
            document.getElementById("prepop-nights").innerHTML = nights;
            document.getElementById("prepop-location").innerHTML = city + ", " + state;
             
            
            document.getElementById("prepop-ad-date").innerHTML = arrivalDate;
            document.getElementById("prepop-ad-d").innerHTML = departureTimeAD;
            document.getElementById("prepop-ad-a").innerHTML = arrivalTimeAD;
            
            document.getElementById("prepop-dd-date").innerHTML = departurelDate;
            document.getElementById("prepop-dd-d").innerHTML = departureTimeDD;
            document.getElementById("prepop-dd-a").innerHTML = arrivalTimeDD;
            
            document.getElementById("bookingModal").style.display = "block";
            document.body.classList.add("no-scroll"); // Disable scrolling
        }

        function closeModal() {
            document.getElementById("bookingModal").style.display = "none";
            document.body.classList.remove("no-scroll"); // Enable scrolling again
        }

        

        function formatDescription(desc, eventId, eventTitle) {
            if (!desc) return "<p>No description available.</p>";

            const details = {};
            const lines = desc.split("\n");

            lines.forEach(line => {
                const match = line.match(/^(.+?):\s*(.+)$/); // Match key-value pairs
                if (match) {
                    const key = match[1].trim().replace("<p>", "");
                    const value = match[2].trim();
                    details[key] = value.replace(/,/g, "");
                }
            });

            return `
              <div class="description-grid">
                <div class="description-column">
                    <input type="hidden" class="event-title" value="${eventTitle}">
                    <input type="hidden" class="event-id" value="${eventId}">
                    <h4>Property Info</h4>
                    <p><strong>Property:</strong> <span class="property">${details["Property"] || "N/A"}</span></p>
                    <p><strong>Number of Nights:</strong> <span class="nights">${details["Number of Nights"] || "N/A"}</span></p>
                    <p><strong>Airport Code:</strong> <span class="airport">${details["Airport Code"] || "N/A"}</span></p>
                    <p><strong>City:</strong> <span class="city">${details["City"] || "N/A"}</span></p>
                    <p><strong>State:</strong> <span class="state">${details["State"] || "N/A"}</span></p>
                </div>
                <div class="description-column">
                    <h4>Arrival Details</h4>
                    <p style="display: none"><strong>Arrival Day:</strong> <span class="arrival-day">${details["Arrival Day"] || "N/A"}</span></p>
                    <p><strong>Arrival Date:</strong> 
                        <span class="arrival-date">
                            ${details["Arrival Date"] 
                                ? new Date(details["Arrival Date"].replace("<br />", "")).toLocaleDateString("en-US", { weekday: "long", month: "long", day: "2-digit", year: "numeric" }) 
                                : "N/A"}
                        </span>
                    </p>
                    <p><strong>Departure Time:</strong> <span class="departure-time-ad">${formatTime(details["Departure Time of AD"])}</span></p>
                    <p><strong>Arrival Time:</strong> <span class="arrival-time-ad">${formatTime(details["Arrival Time of AD"])}</span></p>
                </div>
                <div class="description-column">
                    <h4>Departure Details</h4>
                    <p style="display: none"><strong>Departure Day:</strong> <span class="departure-day">${details["Departure Day"] || "N/A"}</span></p>
                    <p><strong>Departure Date:</strong> 
                        <span class="departure-date">
                            ${details["Departure Date"] 
                                ? new Date(details["Departure Date"].replace("<br />", "")).toLocaleDateString("en-US", { weekday: "long", month: "long", day: "2-digit", year: "numeric" }) 
                                : "N/A"}
                        </span>
                    </p>
                    <p><strong>Departure Time:</strong> <span class="departure-time-dd">${formatTime(details["Departure Time of DD"])}</span></p>
                    <p><strong>Arrival Time:</strong> <span class="arrival-time-dd">${formatTime(details["Arrival Time of DD"])}</span></p>
                </div>
            </div>
            `;
        }

        function formatTime(time) {
            return time ? time.replace(/\b(\d{1,2}):(\d{2})\s?(AM|PM)?\b/, "$1:$2 $3").trim() : "N/A";
        }
        
        document.addEventListener("click", function(event) {
            if (event.target.classList.contains("book-slot")) {
                event.preventDefault(); 
                const grandParent = event.target.closest(".event-accordion");
                // Find the description-grid within the grandparent
                const descriptionGrid = grandParent.querySelector(".description-grid");
                openModal(descriptionGrid);
            }
        });
    </script>

</body>
</html>
